I"ô<p>In theÂ previous post outlined intentionÂ to put together high quality L2/L3 feeds for the top 4-5 bitcoin exchanges, collect L3 data, and provide a consolidated live orderbook for trading. Â  So far have implemented OKCoin and been experimenting with the others to determine their API capabilities.</p>

<p>With the exception of OKCoin, what Iâ€™ve found so far is not good. Â Here is a summary of the top-4 exchanges w/ respect to market data APIs (I also included Coinbase with the notion will become a top player):</p>

<p><img src="/assets/2015-02-08/screen-shot-2015-02-08-at-9-33-28-am.png" alt="Status" /></p>

<p><strong>BTCChina</strong> is, by far, the largest exchange, however appears to have shoddy technology (at least on the market data side). Â They implemented FIX 4.4 last Nov, however is broken in that requests for full OB fail to work as documented (if anyone has had any success with this, please let me know). Â  BTCChina has an alternative public WebSocket/JSON API which provides just 5 orderbook levels. Â However, there appears to be a â€œsecretâ€ API which provides full depth-of-book, as real-time UIs ( such as bitcoinwisdom) show activity beyond 5 levels (if anyone knows how this works, please let me know). Â <strong>Addendum</strong>: I have reached out to BTCChina, hopefully they will address the FIX depth-of-book subscription issue and not treat it as a feature.</p>

<p><strong>OKCoin</strong> is the 2nd largest exchange by volume and appears to have the most active orderbook of the lot. Â The good news is thatÂ its FIX API works as documented. Â  Activity-wise, have been receiving 20+ transactions every 100-300ms or 15ms between transactions on average. Â This degree of activity rivals more traditional markets. Â  That said, have suspicions that the exchange or a market-making partner (with 0 transaction cost) is constantly pumping both sides of the market in the 1st 3-5 levels of the orderbook. Â  The pattern I saw was very shallow orders (1/10th BTC) on the 1st 3-5 levels of both sides of the market getting swept on either side alternatively.</p>

<p><strong>Bitfinex</strong>Â seems to be the most popularÂ BTC/USD exchange, and hence cannot be ignored, even though has a ill-advised market data API. Â  They areÂ beta-testing AlphaPointâ€™s â€œmodernâ€ exchange implementation. Â Once that hits production should expect both FIX and binary streaming feeds. Â  I donâ€™t know whether these will provide a L2 (depth of book) or L3 (order transactions) view of the exchange. Â Either would be very welcome.</p>

<p><strong>BitStamp</strong>Â has fallen dramatically in terms of its share of BTC/USD volume. Â Given its troubles, I wonder whether it will survive. Â  Though it has a â€œsecretâ€ API providing L3 data, the technology backing the exchange is suspect. Â In particular, its matching engine has both <a href="http://www.reddit.com/r/Bitcoin/comments/1r4d6t/bitstamps_streaming_api_and_exploitation/">improper matching semantics</a> (documented on reddit) and isÂ <strong>very slow</strong>, where sweeping a few levels can take seconds to execute. Â  Short of Bitstamp reinventing itself both in terms of technology and trust, the question is then, who will replace them as the #2 presence in the BTC/USD market?</p>

<p><strong>Coinbase</strong>Â or the yet-to-be launched Gemini, may be the successor to Bitstamp in terms of market position (or perhaps even take on Bitfinex). Â With respect to market data, it provides a complete list of orders in the orderbook. <strong>Update</strong>: Coinbase has a streaming API &amp; with level 3 data, my mistake.Â Â <del>However this must be queried by polling their REST/json API. Â  As you can imagine, this is not a scalable approach - the # of orders will grow over time to the point where the message size will be overwhelming on a periodic frequency. Â  The right solution is a streaming API with order transaction â€œdeltasâ€ {new order, del order, update order, etc}. Â  Â The most basicÂ design, scale, &amp; accessibility mistakes have beenÂ repeated, and on a high profile exchange launch (regulated, NYSE-backed, etc).</del></p>

<h2 id="chinese-exchanges">Chinese Exchanges</h2>

<p>It is hard to know what is real with respect to volume &amp; dealability on the chinese exchanges. Â I do not have any trading experience with either OKCoin or BTCChina, however, the following has been noted from multiple sources (<a href="http://www.reddit.com/r/BitcoinMarkets/comments/2swttr/okcoin_unusable_during_this_drop/">for example</a>):</p>

<ul>
  <li>OKCoin: exchange not responsive to crossing orders during larger movements (DDOS on price movements)</li>
  <li>OKCoin &amp; BTCChina: massive wash trading and spam orders (obviously house trading bot given not economical otherwise). Â This resonates with what Iâ€™ve seen in the market data on OKCoin.</li>
</ul>

<p>At least as a data source, I think these exchanges provide value. Â  More ideal would be to find a way to use for trading, and avoid situations where unlikely to be able to execute. Â  With respect to unresponsive crosses in larger price movements, the question is whether this is due to poor matching engine technology (where the OB may be overwhelmed)[1] or whether is being done intentionally â€œfor the houseâ€[2]. Â  It seems very likely that the exchanges are trading on their own behalf in addition to providing exchange services.</p>

<p>Today there was also bad news, where a HK based exchange (MaiCoin) <a href="http://headlines.yahoo.co.jp/hl?a=20150208-00000055-jij-cn">disappeared</a> with $3B HKD worth of deposits from customers. Â  I think there is enough fraud and poor market practices in the bitcoin space, that a certain level of regulation and regulated exchanges will be welcomed.</p>

<h2 id="conclusions-technology">Conclusions (technology)</h2>

<p>My overall impression with (most of) the exchange Bitcoin technology is that it has been designed by the typical full-stack web app developer, takingÂ few learnings from traditional markets or applying common sense with respect to scale. Â  Polling with REST/JSON is one of the dumbest ideas that is pervasive in Bitcoin exchanges (though for some uses is fine). Â  With this sort of exterior interface / design decision, one has to wonder what other marvels are present behind the scenes.</p>

<p>I am sure that these will mature, and via competition, will converge towards more sophistication and sensible design. Â  I would be happy to consult with these exchanges to move their APIs and implementations towards the state of the art, if for no other reason then to make these better venues for trading.</p>

<p><strong>Notes</strong></p>

<p>[1] Given the uninformed / ill-consideredÂ implementationsÂ have seen in the BTC space, would not be a surprise if most exchanges have deficient matching engines, with respect to order volume scaling. Â  Certainly Bitstamp does.</p>

<p>[2] The â€œfor the houseâ€ scam would be to intentionally delay and front-run: in a market upswing, delay buying flow, buy in front of the buyer flow and sell to the latent buyers at a higher price.</p>
:ET